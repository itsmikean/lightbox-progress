"use strict";var app=angular.module("exercise",[]);angular.module("exercise").filter("interpolate",["$interpolate",function($interpolate){return function(value,scope){return $interpolate(value)(scope)}}]),angular.module("exercise").controller("lightboxCtrl",["dataService","lightboxService",function(dataService,lightboxService){var ctrl={},lightboxConfig="";return dataService.getJSON("json/data.json").then(function(data){data&&data.data.lightbox&&(lightboxConfig=data.data.lightbox,lightboxService.open(lightboxConfig,!0))}),ctrl.open=function(){lightboxService.open(lightboxConfig,!1)},ctrl.resetOpen=function(){lightboxService.resetOpen(lightboxConfig)},ctrl}]),angular.module("exercise").directive("lightBox",function(){return{restrict:"E",scope:!0,controller:"lightboxCtrl",controllerAs:"ctrl",templateUrl:"components/lightbox/lightbox.html"}}).directive("lightBoxProgress",function(){return{restrict:"E",scope:{},controller:function($scope,lightboxService){$scope.progressLbConfig=lightboxService.progressLbConfig,$scope.close=function(){lightboxService.close()}},templateUrl:"components/lightbox/lightbox_progress.html"}}),angular.module("exercise").service("lightboxService",["$interval",function($interval){var _this=this;return{progressLbConfig:{progress:0,progressText:"",finish:0,showLightbox:!1},progressStart:function(duration,lightboxConfig){_this=this,_this.progressLbConfig.progressText=lightboxConfig.startText,_this.progressInterval=$interval(function(){_this.progressLbConfig.progress<lightboxConfig.finish?_this.progressLbConfig.progress+=1:(_this.progressLbConfig.progressText=lightboxConfig.finishText,$interval.cancel(_this.progressInterval))},duration)},open:function(lightboxConfig,reset){this.progressLbConfig.showLightbox=!0,reset&&(this.progressLbConfig.progress=lightboxConfig.start,this.progressLbConfig.finish=lightboxConfig.finish,this.progressStart(lightboxConfig.duration/(lightboxConfig.finish-lightboxConfig.start),lightboxConfig))},close:function(){$interval.cancel(this.progressInterval),this.progressLbConfig.showLightbox=!1},resetOpen:function(lightboxConfig){this.open(lightboxConfig,!0)}}}]).service("dataService",["$http","$log",function($http,$log){this.getJSON=function(filePath){return $http.get(filePath).then(function(response){return response.data?response.data:($log.error(response),null)},function(response){return $log.error(response.status,response.statusText),null})}}]);